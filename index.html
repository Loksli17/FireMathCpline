<canvas id="canvas" width="1200" height="500"></canvas>
<style>
	canvas{
		transform: rotate(180deg) rotateY(180deg);
	}
</style>



<script type="text/javascript">	

	function inRad(num) {
		return num * Math.PI / 180;
	}

	let h = 0.01,
		cS = 11, //масштаб
		off = 50, //смещение в пикселях
		u = new Array(),
		x = new Array(),
		f = new Array(),
		us = new Array(), //координаты для сплайна
		yA = new Array(), //координаты оси y
		xA = new Array(), //координаты оси x
		maxY = 0;
		n = 100; 

	u.push(0);
	x.push(0);
	
	for(let i = 1; i <= n; i++){
		u.push(0);
		x.push(x[i - 1] + h);
	}

	u[1] = u[0] + h - h * h;

	//матрица слау
	for(let i = 2; i <= n; i++){
		u[i] = ((4 + 2 * h * h) / (h + 2)) * u[i - 1] + ((2 - h) / (-h - 2)) * u[i - 2] + (2 * h * h) / ( - h - 2) * Math.pow(Math.E, x[i]);
		if(maxY < u[i]){
			maxY = u[i];
		}
	}

	//построение функции
	let canvas = document.getElementById('canvas');
	let ctx = canvas.getContext('2d');
	

	//строим оси
	ctx.beginPath();
	ctx.moveTo(off, off);
    ctx.lineTo(n * cS + (off * 2), off);
    ctx.stroke();
    ctx.moveTo(off, off);
    ctx.lineTo(off, u[n] * n * cS + (off * 4));
    ctx.stroke();
    ctx.closePath();


    //отметки по x
    for(let i = 0; i <= n; i += 10){
    	ctx.save();
    	ctx.translate(i * cS + off, off - 10);
    	ctx.rotate(inRad(180));
    	ctx.scale(-1, 1)
    	ctx.fillText(i / 100, 0, 0);
    	ctx.restore();
    }


    let blackList = new Array(),
    	flagCont = false;


    let stepY = Math.floor((maxY * n * cS + off) / 10),
    	stepU = maxY / 10;
    	valY = maxY * n * cS + off,
    	valU = maxY;

    //отметки по y
    for(let i = 10; i < n; i += 10){
    	
    	ctx.save();
    	ctx.translate(off - 25, valY);
    	ctx.rotate(inRad(180));
    	ctx.scale(-1, 1)
    	ctx.fillText(valU.toString().substring(0, 4), 0, 0);
    	ctx.restore();
    	
    	valU -= stepU
    	valY -= stepY;
    }


	//строим точки
	for(let i = 0; i <= n; i++){
		if(!(i % 10)){
			ctx.fillStyle = 'rgba(0, 50, 230, 1)';
			us.push(u[i]);
		}else{
			ctx.fillStyle = 'rgba(230, 150, 30, 1)';
		}
		console.log(i * cS + off, u[i] * n * cS + off);
		ctx.fillRect(i * cS + off, u[i] * n * cS + off, 5, 5);
	}


	//построение кривой ЭТО ПРИМЕР ПОСТРОЕНИЯ КРИВОЙ БЕЗЬЕ
	// ctx.beginPath();
	// ctx.moveTo(50, 50);
	// ctx.bezierCurveTo(50, 58, 160, 158, 160, 149);
	// ctx.lineWidth = 3;
	// ctx.strokeStyle = "red";
	// ctx.stroke();
	// ctx.closePath();


	//вот тут можно строить сплайн
	let xLeft, yLeft, xRight, yRight, 
		k, xDelta, xDelta1,
	    yPointA, yPointB, yPointC, xPointA,
	    yAyB, yAyC;
	xDelta = 0.05;

	yPointA = u[0];
	yPointB = 0;
	yPointC = u[10];

	ctx.beginPath();
	ctx.moveTo(0, 0);
	for (let i = 1; i < 1; i += 0.1) {
		yPointB = yPointA;
		yPointA = yPointC;
		yPointC = u[i + 10];

		yAyB = yPointA - yPointB;
		yAyC = yPointA - yPointC;
		k = (Math.sqrt((Math.pow(xDelta, 2) + Math.pow(yAyB, 2)) * (Math.pow(xDelta, 2) + Math.pow(yAyC, 2))) - Math.pow(xDelta, 2) - yAyB * yAyC) 
		/ (xDelta * (yPointC - yPointB));

		xDelta1 = xDelta / 2 * Math.sqrt(1 / (1 + Math.pow(k, 2)));

		xLeft = xPointA - xDelta1;
		yLeft = yPointA - xDelta1 * k;
		
		if (i == 0) ctx.quadraticCurveTo(xLeft, yLeft, xPointA, yPointA);
		else if (i != 0.9) ctx.bezierCurveTo(xRight, yRight, xLeft, yLeft, xPointA, yPointA);
		else ctx.quadraticCurveTo(xRight, yRight, xPointA, yPointA);

		xRight = xPointA + xDelta1;
		yRight = yPointA + xDelta1 * k;
	}
	ctx.lineWidth = 3;
	ctx.strokeStyle = "red";
	ctx.stroke();
</script>





<script type="text/javascript">

	//иной вариант построения ОСИ Y

	// flagCont = false;
    	// var val = u[i].toString();
    	// val = val.substring(0, 4);

    	// if(i > 1){
    	// 	for(let j = 0; j < blackList.length; j++){
    	// 		console.log(val, blackList[j]);
    	// 		if(val == blackList[j]){
    	// 			flagCont = true;
    	// 			break;
    	// 		}
    	// 	}
    	// }

    	// if(flagCont){
    	// 	continue;
    	// }else{
    	// 	blackList.push(val);
    	// }	

</script>
